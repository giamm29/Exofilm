
CREATE DATABASE testfilm;

USE testfilm;


-- DDL
CREATE TABLE REGISTA (
	ID_REGISTA INT(10) AUTO_INCREMENT PRIMARY KEY,
	NOME VARCHAR(50),
	COGNOME VARCHAR(50),
	ANNO_DI_NASCITA INT(4),
	ANNO_DI_MORTE INT(4)
)ENGINE=INNODB;

CREATE TABLE FILM (
	ID_FILM INT(10) AUTO_INCREMENT PRIMARY KEY,
	TITOLO VARCHAR(100),
	ID_REGISTA INT(10),
	FOREIGN KEY (ID_REGISTA) REFERENCES REGISTA(ID_REGISTA)
)ENGINE=INNODB;

CREATE TABLE CATEGORIA (
	ID_CATEGORIA INT(10) AUTO_INCREMENT PRIMARY KEY,
	NOME VARCHAR(50) UNIQUE NOT NULL,
	DESCRIZIONE VARCHAR(250)
)ENGINE=INNODB;

CREATE TABLE FILM_CATEGORIA (
	ID_FILM_CATEGORIA INT(10) AUTO_INCREMENT PRIMARY KEY,
	ID_FILM INT(10),
	ID_CATEGORIA INT(10),
	FOREIGN KEY (ID_FILM) REFERENCES FILM(ID_FILM),
	FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA(ID_CATEGORIA)
)ENGINE=INNODB;


-- DML
-- Regista
INSERT INTO REGISTA (
	NOME,
	COGNOME,
	ANNO_DI_NASCITA,
	ANNO_DI_MORTE
) VALUES (
	'Francis Ford',
	'Coppola',
	1939,
	NULL
);

INSERT INTO REGISTA (
	NOME,
	COGNOME,
	ANNO_DI_NASCITA,
	ANNO_DI_MORTE
) VALUES (
	'Sergio',
	'Leone',
	1929,
	1989
);

-- Film
INSERT INTO FILM (
	TITOLO,
	ID_REGISTA
) VALUES (
	'Per un pugno di dollari',
	2
);

INSERT INTO FILM (
	TITOLO,
	ID_REGISTA
) VALUES (
	'Per qualche dollaro in pi√π',
	2
);

INSERT INTO FILM (
	TITOLO,
	ID_REGISTA
) VALUES (
	'Il buono, il brutto, il cattivo',
	2
);

INSERT INTO FILM (
	TITOLO,
	ID_REGISTA
) VALUES (
	'Il padrino',
	1
);

INSERT INTO FILM (
	TITOLO,
	ID_REGISTA
) VALUES (
	'Il pardino - parte II',
	1
);

-- Categoria
INSERT INTO CATEGORIA (
	NOME,
	DESCRIZIONE
) VALUES (
	'Azione',
	'Genere di azione'
);

INSERT INTO CATEGORIA (
	NOME,
	DESCRIZIONE
) VALUES (
	'Horror',
	'Genere violento'
);

INSERT INTO categoria (
	NOME,
	DESCRIZIONE
) VALUES (
	'Spaghetti Western',
	'I film di Sergio Leone'
);

-- Bridge Table Film_Categoria
INSERT INTO FILM_CATEGORIA (
	ID_FILM,
	ID_CATEGORIA
) VALUES (
	1,
	3
);

INSERT INTO FILM_CATEGORIA (
	ID_FILM,
	ID_CATEGORIA
) VALUES (
	2,
	3
);

INSERT INTO FILM_CATEGORIA (
	ID_FILM,
	ID_CATEGORIA
) VALUES (
	3,
	3
);

